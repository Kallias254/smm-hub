FROM node:22-alpine

# Install system dependencies (FFmpeg is required for the creative engine)
RUN apk add --no-cache ffmpeg

# Enable pnpm
RUN corepack enable && corepack prepare pnpm@latest --activate

WORKDIR /home/node/app

# We don't COPY files here because they are mounted via volumes in docker-compose for dev
EXPOSE 3000

CMD ["pnpm", "dev"]
